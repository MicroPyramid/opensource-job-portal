<!DOCTYPE html>
{% extends "base_with_tailwind.html" %}
{% load thumbnail %}
{% load static %}
{% load page_tags %}

{% block title %}{{ meta_title|safe }}{% endblock %}

{% block extra_css %}
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11720509-7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'UA-11720509-7');
</script>

<!-- SEO Meta Tags -->
<meta name="description" content="{{ meta_description|safe }}" />
<meta property="og:url" content="https://peeljobs.com{{ request.path }}" />
<meta property="og:title" content="{{ meta_title|safe }}" />
<meta property="og:description" content="{{ meta_description|safe }}" />
<meta property="og:image" content="{{jobopenings}}" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<link rel="icon" type="image/x-icon" href="{{favicon}}" />

<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

<!-- reCAPTCHA -->
<script src='https://www.google.com/recaptcha/api.js'></script>
{% endblock %}

{% block body_class %}bg-gray-50 font-inter{% endblock %}

{% block content %}
<div class="min-h-screen flex flex-col">
  <!-- Compact Header with Navigation -->
  <header class="bg-blue-600">
    <!-- Navigation Bar -->
    <nav class="relative z-10">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-14">
          <!-- Brand -->
          <div class="flex-shrink-0">
            <a href="/" class="text-white font-bold text-xl hover:text-blue-200">
              Peeljobs
            </a>
          </div>

          <!-- Desktop Navigation -->
          <div class="hidden md:block">
            <div class="ml-10 flex items-center space-x-4">
              <a href="{% url 'fresher_jobs_by_skills' 'fresher' %}"
                class="text-white/90 hover:text-white px-2 py-1 text-sm font-medium">
                Fresher Jobs
              </a>
              <a href="{% url 'fresher_jobs_by_skills' 'walkin' %}"
                class="text-white/90 hover:text-white px-2 py-1 text-sm font-medium">
                Walkins
              </a>
              <a href="{% url 'internship_jobs' %}"
                class="text-white/90 hover:text-white px-2 py-1 text-sm font-medium">
                Internships
              </a>
              <a href="{% url 'companies' %}"
                class="text-white/90 hover:text-white px-2 py-1 text-sm font-medium">
                Companies
              </a>
              <a href="{% url 'recruiters' %}"
                class="text-white/90 hover:text-white px-2 py-1 text-sm font-medium">
                Recruiters
              </a>
            </div>
          </div>

          <!-- Right side navigation -->
          <div class="hidden md:flex items-center space-x-3">
            <a href="/login/"
              class="text-white/90 hover:text-white px-3 py-2 text-sm font-medium">
              Login
            </a>
            <div class="h-4 w-px bg-white/30"></div>
            <a href="{% url 'post_job' %}"
              class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg text-sm font-medium">
              Recruiter Login | Register
            </a>
          </div>

          <!-- Mobile menu button -->
          <div class="md:hidden">
            <button type="button" class="text-white p-2" id="mobile-menu-button">
              <i data-lucide="menu" class="w-5 h-5"></i>
            </button>
          </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div class="md:hidden hidden py-3 border-t border-blue-400/30" id="mobile-menu">
          <div class="px-2 pt-2 pb-3 space-y-1">
            <a href="{% url 'fresher_jobs_by_skills' 'fresher' %}"
              class="text-white hover:text-gray-200 hover:bg-blue-700 block px-3 py-2 text-base font-medium rounded">Fresher Jobs</a>
            <a href="{% url 'fresher_jobs_by_skills' 'walkin' %}"
              class="text-white hover:text-gray-200 hover:bg-blue-700 block px-3 py-2 text-base font-medium rounded">Walkin Jobs</a>
            <a href="{% url 'internship_jobs' %}"
              class="text-white hover:text-gray-200 hover:bg-blue-700 block px-3 py-2 text-base font-medium rounded">Internship</a>
            <a href="{% url 'companies' %}"
              class="text-white hover:text-gray-200 hover:bg-blue-700 block px-3 py-2 text-base font-medium rounded">Companies</a>
            <a href="{% url 'recruiters' %}"
              class="text-white hover:text-gray-200 hover:bg-blue-700 block px-3 py-2 text-base font-medium rounded">Recruiters</a>

            {% if not request.user.is_authenticated %}
            <div class="border-t border-blue-500 pt-3 mt-3">
              <a href="/login/"
                class="text-white hover:text-gray-200 hover:bg-blue-700 block px-3 py-2 text-base font-medium rounded">Login</a>
              <a href="{% url 'post_job' %}"
                class="text-white hover:text-gray-200 hover:bg-blue-700 block px-3 py-2 text-base font-medium rounded">Recruiter Login | Register</a>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Content -->
  <main class="flex-1 bg-gray-50 py-8">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid lg:grid-cols-2 gap-12 items-start">
        
        <!-- Left Column: Information & Stats -->
        <div class="space-y-8">
          <!-- Hero Section -->
          <div class="text-center lg:text-left">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
              Join 10,000+ Companies Hiring with PeelJobs
            </h1>
            <p class="text-xl text-gray-600 mb-6 leading-relaxed">
              Access India's largest talent pool with 2M+ active job seekers. Post unlimited jobs for free and find the perfect candidates faster.
            </p>
          </div>

          <!-- Key Statistics -->
          <div class="grid grid-cols-2 gap-4">
            <div class="bg-blue-50 border border-blue-200 rounded-xl p-6 text-center">
              <div class="text-3xl font-bold text-blue-600 mb-2">2M+</div>
              <p class="text-sm text-gray-700 font-medium">Active Job Seekers</p>
            </div>
            <div class="bg-green-50 border border-green-200 rounded-xl p-6 text-center">
              <div class="text-3xl font-bold text-green-600 mb-2">1000+</div>
              <p class="text-sm text-gray-700 font-medium">Daily Applications</p>
            </div>
            <div class="bg-purple-50 border border-purple-200 rounded-xl p-6 text-center">
              <div class="text-3xl font-bold text-purple-600 mb-2">10K+</div>
              <p class="text-sm text-gray-700 font-medium">Companies Trust Us</p>
            </div>
            <div class="bg-orange-50 border border-orange-200 rounded-xl p-6 text-center">
              <div class="text-3xl font-bold text-orange-600 mb-2">24/7</div>
              <p class="text-sm text-gray-700 font-medium">Expert Support</p>
            </div>
          </div>

          <!-- Key Benefits -->
          <div class="bg-white rounded-2xl shadow-lg border border-gray-200 p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
              <i data-lucide="star" class="w-6 h-6 text-yellow-500 mr-2"></i>
              Why Recruiters Choose PeelJobs
            </h3>
            <div class="space-y-4">
              <div class="flex items-start space-x-3">
                <div class="bg-blue-100 rounded-full p-2 mt-0.5">
                  <i data-lucide="zap" class="w-4 h-4 text-blue-600"></i>
                </div>
                <div>
                  <h4 class="font-semibold text-gray-900">Instant Job Posting</h4>
                  <p class="text-sm text-gray-600">Post unlimited jobs for free and get applications within hours</p>
                </div>
              </div>
              <div class="flex items-start space-x-3">
                <div class="bg-green-100 rounded-full p-2 mt-0.5">
                  <i data-lucide="target" class="w-4 h-4 text-green-600"></i>
                </div>
                <div>
                  <h4 class="font-semibold text-gray-900">Smart Matching</h4>
                  <p class="text-sm text-gray-600">AI-powered system matches you with the most qualified candidates</p>
                </div>
              </div>
              <div class="flex items-start space-x-3">
                <div class="bg-purple-100 rounded-full p-2 mt-0.5">
                  <i data-lucide="users" class="w-4 h-4 text-purple-600"></i>
                </div>
                <div>
                  <h4 class="font-semibold text-gray-900">Quality Candidates</h4>
                  <p class="text-sm text-gray-600">Access to verified profiles with detailed skills and experience</p>
                </div>
              </div>
              <div class="flex items-start space-x-3">
                <div class="bg-orange-100 rounded-full p-2 mt-0.5">
                  <i data-lucide="headphones" class="w-4 h-4 text-orange-600"></i>
                </div>
                <div>
                  <h4 class="font-semibold text-gray-900">Dedicated Support</h4>
                  <p class="text-sm text-gray-600">24/7 customer support to help optimize your hiring process</p>
                </div>
              </div>
            </div>
          </div>


        </div>

        <!-- Right Column: Registration Form -->
        <div class="lg:sticky lg:top-8">
          <div class="bg-white rounded-2xl shadow-xl border border-gray-200 p-6 md:p-8">
            <!-- Header -->
            <div class="text-center mb-6">
              <div class="bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                <i data-lucide="user-plus" class="w-8 h-8 text-blue-600"></i>
              </div>
              <h2 class="text-2xl font-bold text-gray-900 mb-2">Start Your Free Account</h2>
              <p class="text-gray-600">Join thousands of recruiters already using PeelJobs</p>
            </div>

            <!-- Trust Indicators -->
            <div class="flex justify-center space-x-6 mb-6 text-sm text-gray-600">
              <div class="flex items-center">
                <i data-lucide="check-circle" class="w-4 h-4 mr-1 text-green-500"></i>
                Free Forever
              </div>
              <div class="flex items-center">
                <i data-lucide="shield-check" class="w-4 h-4 mr-1 text-blue-500"></i>
                Secure & Safe
              </div>
              <div class="flex items-center">
                <i data-lucide="clock" class="w-4 h-4 mr-1 text-purple-500"></i>
                2 Min Setup
              </div>
            </div>

            <!-- Registration Form -->
            <form id="reg-form" method="post" class="space-y-6">
              {% csrf_token %}
              
              <!-- Username Field -->
              <div>
                <label for="register-username" class="block text-sm font-semibold text-gray-700 mb-2">
                  Username <span class="text-red-500">*</span>
                </label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i data-lucide="user" class="w-5 h-5 text-gray-400"></i>
                  </div>
                  <input type="text" id="register-username" name="username" 
                    class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                    placeholder="Enter your username" required>
                </div>
              </div>

              <!-- Email Field -->
              <div>
                <label for="register-email" class="block text-sm font-semibold text-gray-700 mb-2">
                  Email Address <span class="text-red-500">*</span>
                </label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i data-lucide="mail" class="w-5 h-5 text-gray-400"></i>
                  </div>
                  <input type="email" id="register-email" name="email" 
                    class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                    placeholder="Enter your email" required>
                </div>
              </div>

              <!-- Mobile Field -->
              <div>
                <label for="register-mobile" class="block text-sm font-semibold text-gray-700 mb-2">
                  Mobile Number <span class="text-red-500">*</span>
                </label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i data-lucide="phone" class="w-5 h-5 text-gray-400"></i>
                  </div>
                  <input type="tel" id="register-mobile" name="mobile" 
                    class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                    placeholder="Enter your mobile number" required>
                </div>
              </div>

              <!-- Password Field -->
              <div>
                <label for="register-password" class="block text-sm font-semibold text-gray-700 mb-2">
                  Password <span class="text-red-500">*</span>
                </label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i data-lucide="lock" class="w-5 h-5 text-gray-400"></i>
                  </div>
                  <input type="password" name="password" id="register-password" 
                    class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                    placeholder="Create a strong password" required>
                </div>
              </div>

              <!-- Client Type Field -->
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-3">
                  Client Type <span class="text-red-500">*</span>
                </label>
                <div class="space-y-3">
                  <div class="flex items-center">
                    <input type="radio" id="register-client_type-recruiter" name="client_type"
                      class="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 client_type" value="recruiter" required>
                    <label for="register-client_type-recruiter" class="ml-3 flex items-center text-sm font-medium text-gray-700">
                      <i data-lucide="user-check" class="w-5 h-5 mr-2 text-blue-600"></i>
                      Recruiter
                    </label>
                  </div>
                  <div class="flex items-center">
                    <input type="radio" id="register-client_type-company" name="client_type"
                      class="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 client_type" value="company" required>
                    <label for="register-client_type-company" class="ml-3 flex items-center text-sm font-medium text-gray-700">
                      <i data-lucide="building-2" class="w-5 h-5 mr-2 text-green-600"></i>
                      Consultancy
                    </label>
                  </div>
                </div>
              </div>

              <!-- Company Fields (Initially Hidden) -->
              <div class="company-fields hidden space-y-6">
                <!-- Company Name -->
                <div>
                  <label for="register-name" class="block text-sm font-semibold text-gray-700 mb-2">
                    Company Name
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                      <i data-lucide="building" class="w-5 h-5 text-gray-400"></i>
                    </div>
                    <input type="text" id="register-name" name="name" 
                      class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                      placeholder="Enter company name">
                  </div>
                </div>

                <!-- Company Website -->
                <div>
                  <label for="register-website" class="block text-sm font-semibold text-gray-700 mb-2">
                    Company Website
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                      <i data-lucide="globe" class="w-5 h-5 text-gray-400"></i>
                    </div>
                    <input type="url" id="register-website" name="website" 
                      class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                      placeholder="https://yourcompany.com">
                  </div>
                </div>
              </div>

              <!-- Submit Buttons -->
              <div class="pt-4">
                <button type="button" class="g-recaptcha w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg flex items-center justify-center" 
                  data-sitekey="{{ RECAPTCHA_SITE_KEY }}" data-callback='onSubmit' data-action='submit'>
                  <i data-lucide="user-plus" class="w-5 h-5 mr-2"></i>
                  Create Account
                </button>

                <!-- Fallback button in case reCAPTCHA fails to load -->
                <button type="submit" class="fallback-submit w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg flex items-center justify-center hidden">
                  <i data-lucide="user-plus" class="w-5 h-5 mr-2"></i>
                  Create Account (Fallback)
                </button>
              </div>
            </form>

            <!-- Login Link -->
            <div class="mt-6 text-center">
              <p class="text-sm text-gray-600">
                Already have an account? 
                <a href="/recruiter/login/" class="font-medium text-blue-600 hover:text-blue-500">
                  Sign in here
                </a>
              </p>
            </div>

            <!-- Additional Trust Indicators -->
            <div class="mt-6 pt-6 border-t border-gray-200">
              <div class="flex justify-center space-x-4 text-xs text-gray-500">
                <div class="flex items-center">
                  <i data-lucide="lock" class="w-3 h-3 mr-1"></i>
                  SSL Encrypted
                </div>
                <div class="flex items-center">
                  <i data-lucide="shield" class="w-3 h-3 mr-1"></i>
                  GDPR Compliant
                </div>
                <div class="flex items-center">
                  <i data-lucide="phone" class="w-3 h-3 mr-1"></i>
                  24/7 Support
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Compact Footer -->
  <footer class="bg-gray-900 text-white py-6">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
        <div class="flex space-x-4">
          <a href="https://facebook.com/peeljobs/" target="_blank"
            class="bg-blue-600 hover:bg-blue-700 p-2 rounded-lg">
            <i data-lucide="facebook" class="w-4 h-4"></i>
          </a>
          <a href="https://www.linkedin.com/company/peeljobs" target="_blank"
            class="bg-blue-600 hover:bg-blue-700 p-2 rounded-lg">
            <i data-lucide="linkedin" class="w-4 h-4"></i>
          </a>
          <a href="https://twitter.com/PeelJobs" target="_blank"
            class="bg-blue-400 hover:bg-blue-500 p-2 rounded-lg">
            <i data-lucide="twitter" class="w-4 h-4"></i>
          </a>
        </div>
        <div class="flex flex-wrap justify-center gap-4 text-sm text-gray-400">
          <a href="/" class="hover:text-white">Home</a>
          <a href="{% url 'pages' 'about-us' %}" class="hover:text-white">About us</a>
          <a href="{% url 'pages' 'terms-conditions' %}" class="hover:text-white">Terms & Conditions</a>
          <a href="{% url 'pages' 'privacy-policy' %}" class="hover:text-white">Privacy Policy</a>
          <a href="{% url 'pages' 'recruiter-faq' %}" class="hover:text-white">FAQ</a>
          <a href="{% url 'contact' %}" class="hover:text-white">Contact Us</a>
          <a href="{% url 'sitemap' %}" class="hover:text-white">Sitemap</a>
        </div>
        <div class="text-sm text-gray-400">
          © 2024 PeelJobs. All rights reserved.
        </div>
      </div>
    </div>
  </footer>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
  integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
  // Initialize Lucide icons
  lucide.createIcons();

  // Mobile menu toggle
  document.getElementById('mobile-menu-button').addEventListener('click', function () {
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenu.classList.toggle('hidden');
  });

  // Show/hide company fields based on client type selection
  document.querySelectorAll('.client_type').forEach(function(radio) {
    radio.addEventListener('change', function() {
      const companyFields = document.querySelector('.company-fields');
      if (this.value === 'company') {
        companyFields.classList.remove('hidden');
      } else {
        companyFields.classList.add('hidden');
      }
    });
  });

  // reCAPTCHA handling
  function onSubmit(token) {
    console.log('reCAPTCHA verified, token:', token);

    // Add reCAPTCHA token to form
    var form = document.getElementById("reg-form");

    // Remove any existing reCAPTCHA token inputs
    var existingTokens = form.querySelectorAll('input[name="g-recaptcha-response"]');
    existingTokens.forEach(function (input) {
      input.remove();
    });

    // Add new reCAPTCHA token
    var tokenInput = document.createElement("input");
    tokenInput.type = "hidden";
    tokenInput.name = "g-recaptcha-response";
    tokenInput.value = token;
    form.appendChild(tokenInput);

    console.log('Triggering form submission');
    // Trigger the form submission which will be handled by the jQuery submit handler
    $(form).trigger('submit');
  }

  // Check if reCAPTCHA loaded properly and show fallback if needed
  $(document).ready(function () {
    // Add click handler for debugging
    $('.g-recaptcha').on('click', function () {
      console.log('reCAPTCHA button clicked');
    });

    $('.fallback-submit').on('click', function () {
      console.log('Fallback button clicked');
    });

    // Wait a bit for reCAPTCHA to load
    setTimeout(function () {
      if (typeof grecaptcha === 'undefined') {
        console.log('reCAPTCHA failed to load, showing fallback');
        $('.g-recaptcha').hide();
        $('.fallback-submit').show();
      } else {
        console.log('reCAPTCHA loaded successfully');
      }
    }, 3000);
  });
</script>
{% endblock %}